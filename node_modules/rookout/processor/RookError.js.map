{"version":3,"sources":["../../../src/processor/RookError.js"],"names":["variant_pb","require","RookError","constructor","error","message","ToolException","type","__proto__","name","parameters","stackTrace","stack","dumps","Error","setMessage","e","setType","setParameters","NamespaceSerializer","DictNamespace","setExc","JSObjectNamespace","setTraceback","tailorDumpConfig"],"mappings":"AAAA;;;;;;;AAEA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,UAAU,GAAGC,OAAO,CAAC,wBAAD,CAA1B;;AAEe,MAAMC,SAAN,CAAgB;AAC3BC,EAAAA,WAAW,CAACC,KAAD,EAAQC,OAAO,GAAG,EAAlB,EAAsB;AAC7B,SAAKD,KAAL,GAAaA,KAAb;;AAEA,QAAIA,KAAK,YAAYE,yBAArB,EAAoC;AAChC,WAAKC,IAAL,GAAYH,KAAK,CAACI,SAAN,CAAgBL,WAAhB,CAA4BM,IAAxC;AACA,WAAKJ,OAAL,GAAeD,KAAK,CAACC,OAArB;AACA,WAAKK,UAAL,GAAkBN,KAAK,CAACM,UAAxB;AACH,KAJD,MAIO;AACH,WAAKH,IAAL,GAAY,SAAZ;AACA,WAAKF,OAAL,GAAeA,OAAf;AACA,WAAKK,UAAL,GAAkB,IAAlB;AACH,KAX4B,CAa7B;;;AACA,SAAKC,UAAL,GAAkBP,KAAK,CAACQ,KAAxB;AACH;;AAEDC,EAAAA,KAAK,GAAG;AACJ,QAAIT,KAAK,GAAG,IAAIJ,UAAU,CAACc,KAAf,EAAZ;;AAEA,QAAI;AACAV,MAAAA,KAAK,CAACW,UAAN,CAAiB,KAAKV,OAAtB;AACH,KAFD,CAEE,OAAOW,CAAP,EAAU,CAAG;;AAEf,QAAI;AACAZ,MAAAA,KAAK,CAACa,OAAN,CAAc,KAAKV,IAAnB;AACH,KAFD,CAEE,OAAOS,CAAP,EAAU,CAAG;;AAEf,QAAI;AACAZ,MAAAA,KAAK,CAACc,aAAN,CAAqB,IAAIC,4BAAJ,EAAD,CAA4BN,KAA5B,CAAkC,IAAIO,sBAAJ,CAAkB,KAAKV,UAAvB,CAAlC,CAApB;AACH,KAFD,CAEE,OAAOM,CAAP,EAAU,CAAG;;AAEf,QAAI;AACAZ,MAAAA,KAAK,CAACiB,MAAN,CAAc,IAAIF,4BAAJ,EAAD,CAA4BN,KAA5B,CAAkC,IAAIS,0BAAJ,CAAsB,KAAKlB,KAA3B,CAAlC,CAAb;AACH,KAFD,CAEE,OAAOY,CAAP,EAAU,CAAG;;AAEf,QAAI;AACAZ,MAAAA,KAAK,CAACmB,YAAN,CAAoB,IAAIJ,4BAAJ,EAAD,CAA4BN,KAA5B,CAAkC,IAAIS,0BAAJ,CAAsB,KAAKX,UAA3B,EACnDW,2BAAkBE,gBAAlB,CAAmC,KAAKb,UAAxC,CADmD,CAAlC,CAAnB;AAEH,KAHD,CAGE,OAAOK,CAAP,EAAU,CAAG;;AAEf,WAAOZ,KAAP;AACH;;AA3C0B","sourcesContent":["\"use strict\";\r\n\r\nimport {ToolException} from '../exceptions';\r\nimport NamespaceSerializer from './NamespaceSerializer';\r\nimport JSObjectNamespace from \"./namespaces/JSObjectNamespace\";\r\nimport DictNamespace from \"./namespaces/DictNamespace\";\r\n\r\nconst variant_pb = require('../protobuf/variant_pb');\r\n\r\nexport default class RookError {\r\n    constructor(error, message = \"\") {\r\n        this.error = error;\r\n\r\n        if (error instanceof ToolException) {\r\n            this.type = error.__proto__.constructor.name;\r\n            this.message = error.message;\r\n            this.parameters = error.parameters;\r\n        } else {\r\n            this.type = \"Unknown\";\r\n            this.message = message;\r\n            this.parameters = null;\r\n        }\r\n\r\n        // FUTURE - advanced stack extraction\r\n        this.stackTrace = error.stack;\r\n    }\r\n\r\n    dumps() {\r\n        let error = new variant_pb.Error();\r\n\r\n        try {\r\n            error.setMessage(this.message);\r\n        } catch (e) { }\r\n\r\n        try {\r\n            error.setType(this.type);\r\n        } catch (e) { }\r\n\r\n        try {\r\n            error.setParameters((new NamespaceSerializer()).dumps(new DictNamespace(this.parameters)));\r\n        } catch (e) { }\r\n\r\n        try {\r\n            error.setExc((new NamespaceSerializer()).dumps(new JSObjectNamespace(this.error)));\r\n        } catch (e) { }\r\n\r\n        try {\r\n            error.setTraceback((new NamespaceSerializer()).dumps(new JSObjectNamespace(this.stackTrace,\r\n              JSObjectNamespace.tailorDumpConfig(this.stackTrace))));\r\n        } catch (e) { }\r\n\r\n        return error;\r\n    }\r\n}\r\n"],"file":"RookError.js"}