{"version":3,"sources":["../../src/check.js"],"names":["console","log","success","undefined","rook","require","module","exports","r","start","throw_errors","then","catch","e","stack","process","exit","count","setInterval","error"],"mappings":"AAAA;AACA;;AAEAA,OAAO,CAACC,GAAR,CAAY,kDAAZ;AAEA,IAAIC,OAAO,GAAGC,SAAd;;AAEA,IAAI;AACA,QAAMC,IAAI,GAAGC,OAAO,CAAC,SAAD,CAApB;;AAEAC,EAAAA,MAAM,CAACC,OAAP,GAAiBH,IAAjB;AACA,MAAII,CAAC,GAAGJ,IAAI,CAACK,KAAL,CAAW;AAACC,IAAAA,YAAY,EAAE;AAAf,GAAX,CAAR;AAEAF,EAAAA,CAAC,CAACG,IAAF,CAAO,MAAM;AACTT,IAAAA,OAAO,GAAG,IAAV;AACH,GAFD,EAEGU,KAFH,CAGKC,CAAD,IAAO;AACHX,IAAAA,OAAO,GAAG,KAAV;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,kCAAkCY,CAA9C;AACH,GANL;AAOH,CAbD,CAaE,OAAOA,CAAP,EAAU;AACRb,EAAAA,OAAO,CAACC,GAAR,CAAYY,CAAC,CAACC,KAAF,IAAWD,CAAvB;AACAb,EAAAA,OAAO,CAACC,GAAR,CAAY,qDAAZ;AACAc,EAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACH;;AAED,IAAIC,KAAK,GAAG,CAAZ;AACAC,WAAW,CAAC,MAAM;AACd,MAAIhB,OAAO,KAAKC,SAAhB,EAA2B;AACvB,QAAID,OAAJ,EAAa;AACTF,MAAAA,OAAO,CAACmB,KAAR,CAAc,kCAAd;AACAJ,MAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACH,KAHD,MAGO;AACHhB,MAAAA,OAAO,CAACC,GAAR,CAAY,qDAAZ;AACAc,MAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACH;AACJ;;AACD,MAAIC,KAAK,GAAG,EAAZ,EAAgB;AACZjB,IAAAA,OAAO,CAACC,GAAR,CAAY,uCAAZ;AACAc,IAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACH;;AACDC,EAAAA,KAAK,GAAGA,KAAK,GAAG,CAAhB;AACH,CAfU,EAeR,IAfQ,CAAX","sourcesContent":["#!/usr/bin/env node\n\"use strict\";\n\nconsole.log(\"[Rookout] Testing connection to Rookout Agent...\");\n\nlet success = undefined;\n\ntry {\n    const rook = require('./index');\n\n    module.exports = rook;\n    let r = rook.start({throw_errors: true});\n\n    r.then(() => {\n        success = true;\n    }).catch(\n        (e) => {\n            success = false;\n            console.log(\"[Rookout] Failed to connect: \" + e);\n        });\n} catch (e) {\n    console.log(e.stack || e);\n    console.log(\"[Rookout] Failed to connect, please see error above\");\n    process.exit(1);\n}\n\nvar count = 0;\nsetInterval(() => {\n    if (success !== undefined) {\n        if (success) {\n            console.error(\"[Rookout] Connected successfully\");\n            process.exit(0);\n        } else {\n            console.log(\"[Rookout] Failed to connect, please see error above\");\n            process.exit(1);\n        }\n    }\n    if (count > 10) {\n        console.log(\"[Rookout] Failed to connect - Timeout\");\n        process.exit(2);\n    }\n    count = count + 1;\n}, 1000);\n"],"file":"check.js"}